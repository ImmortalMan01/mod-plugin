# Moderation Discord Bot

This Node.js bot works alongside the ChatModeration plugin.
It exposes a small HTTP API that the plugin can call whenever a player is muted
and provides a `/logs` slash command (plus an optional prefix command) to display recent mute logs.

## Setup

1. Install dependencies:
   ```bash
   npm install
   ```
2. Copy `.env.example` to `.env` and edit the values:
   - `DISCORD_TOKEN` – bot token
   - `CLIENT_ID` – application client ID used for slash command registration
   - `GUILD_ID` – (optional) guild to register commands in
   - `CHANNEL_ID` – channel to send notifications (defaults to `1383833781483471020`)
   - `LOG_FILE` – path to `logs.json` generated by the plugin
   - `PORT` – HTTP port (defaults to `3000`)
   - `PREFIX` – command prefix, either `!` (default) or `/`
   - `PLUGIN_URL` – URL of the plugin's web server for unmute actions (defaults to `http://localhost:8081`)

3. Start the bot:
   ```bash
   npm start
   ```

## API

`POST /mute`
```json
{
  "player": "Steve",
  "reason": "bad words",
  "remaining": 5
}
```

The bot will announce the mute to the configured channel.
The message includes an **Unmute** button that triggers a request to the plugin.

## Commands

Use `/logs [count]` to display the latest log entries. A prefix version is also available as `<prefix>logs [count]` when `PREFIX` is set. The optional `count` argument specifies how many entries to show (default is 5).
